<html>
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Ballot Bots Data Demo.">
    <meta name="mbaldassaro" content="">
    <title>Ballot Bots | Data Demo</title>
    
    <!--<link rel="shortcut icon" href="../img/favicon.ico" type="image/x-icon">
    <link rel="icon" href="../img/favicon.ico" type="image/x-icon">-->
    <link href="../bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">   
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css">
    <link href="../node_modules/nvd3/nv.d3.min.css" rel="stylesheet" type="text/css">
    <style>
      
        svg {
            display: block;
            float: left;
            /*height: 33%;*/
            height: 500px;
            min-width: 100%;
        } 

    </style>    
</head>
<body>

	<div id="wrapper">
        <!-- Navigation -->
        <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="../dashboard/index.html">  Ballot Bots</a>
            </div>
            <!-- /.navbar-header -->
        </nav>

        <a href="plot.html">plot</a>

 	<div id="wrapper">
        <div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header"><strong>Demo Data 1</strong></h1>
                </div>
            </div>
                     <svg id="chart1" class="with-3d-shadow with-transitions"></svg>
            </div>
        </div> 

        <div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header"><strong>Demo Data 2</strong></h1>
                </div>
            </div>
                     <svg id="chart2" class="with-3d-shadow with-transitions"></svg>
            </div>
        </div>

        <div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header"><strong>Demo Data 3</strong></h1>
                </div>
            </div>
                     <svg id="chart3" class="with-3d-shadow with-transitions"></svg>
            </div>
        </div>

  </div>      

<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.2/d3.min.js" charset="utf-8"></script>
<script src="../node_modules/nvd3/nv.d3.js"></script>
<script src="../node_modules/nvd3/src/interactiveLayer.js"></script>
<script src="../node_modules/nvd3/src/utils.js"></script>
<script src="../node_modules/nvd3/src/tooltip.js"></script>
<script src="../node_modules/nvd3/src/models/multiBarHorizontal.js"></script>
<script src="../node_modules/nvd3/src/models/multiBarHorizontalChart.js"></script>
<script src="../bower_components/jquery/dist/jquery.min.js"></script>
<script src="../bower_components/bootstrap/dist/js/bootstrap.min.js"></script> 
<script>
 
   var data = [
    {
        "key": "Very Important",
        "color": "#005288", //blue
        "values": [
            {   "label": "New Voter Registration System", "value": 58.9 },
            {   "label": "IEC Reform", "value": 70.2 },
            {   "label": "New Electoral System", "value": 66.8 }
        ]
    },
    {
        "key": "Important",
        "color": "#7aa9dd", //lightblue
        "values": [
            {   "label": "New Voter Registration System", "value": 33.9 },
            {   "label": "IEC Reform", "value": 24.8 },
            {   "label": "New Electoral System", "value": 25.5 }
        ]
    },
    {
        "key": "Not Very Important",
        "color": "#bc8f8f", //light red
        "values": [
            {   "label": "New Voter Registration System", "value": 4.0 },
            {   "label": "IEC Reform", "value": 3.2 },
            {   "label": "New Electoral System", "value": 4.5 }
        ]
    },
    {
        "key": "Not Important at All",
        "color": "#800000", //red
        "values": [
            {   "label": "New Voter Registration System", "value": 1.5 },
            {   "label": "IEC Reform", "value": 0.7 },
            {   "label": "New Electoral System", "value": 1.3 }
        ]
    }
]
    
nv.addGraph(function() {
  var chart = nv.models.multiBarChart()
      .x(function(d) { return d.label })
      .y(function(d) { return d.value / 100 })
      //.margin({left: 100})
      /*.tooltipContent(function(key, x, y, e, graph) {
        return '<h5 style="text-align:center; padding:0px; color:#000; font-weight: 700">' + key + " (" + x + ")</h5><h4 style='text-align: center; color: #000; font-weight: 700;'>" + y + '</h5>'
    });*/

      
        //.showValues(false)
        .tooltips(true)
        //.barColor(d3.scale.category20().range())
        //.stacked(true)
        //.showControls(false);

  chart.yAxis 
    .tickFormat(d3.format('.1%'));
  //chart.xAxis
    //.tickFormat(d3.format('d'));

  d3.select('#chart1')
      .datum(data)
      .transition().duration(1200)
      .call(chart);

  nv.utils.windowResize(chart.update);

  chart.dispatch.on('stateChange', function(e) { nv.log('New State:', JSON.stringify(e)); });

  return chart;
});

d3.csv("data/COUNTER.csv", function(error, data) { 
var data = [
    {
    key: "Ballot Detected",
    values: []
    }
];

data.forEach(function (d) {
    //d.value = +d.value
    d.date = +d.date;
    d.val = +d.val;
})

 nv.addGraph(function() {
    var chart = nv.models.lineChart()
                  .x(function(d) { return d[0]})
                  .y(function(d) { return d[1] }) //adjusting, 100% is 1.00, not 100 as it is in the data
                  //.color(d3.scale.category10().range())
                  
                  //.duration(1200)
                  //.width(width)
                  .useInteractiveGuideline(true);
             

     chart.xAxis
        .margin({bottom: 50})
        .tickValues([1428417291,1428417331])
        .tickFormat(function(d) {
            return d3.time.format('%c')(new Date(d))
          });

    chart.yAxis
        .tickFormat(d3.format('.1'));

    d3.select('#chart2')
        .datum(data)
        //.transition().duration(1200)
        .call(chart);

    nv.utils.windowResize(chart.update);

    return chart;
  });
});

</script>

</body>
</html>