<html>
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Ballot Bots Data Demo.">
    <meta name="mbaldassaro" content="">
    <title>Ballot Bots | Data Demo</title>
    
    <!--<link rel="shortcut icon" href="../img/favicon.ico" type="image/x-icon">
    <link rel="icon" href="../img/favicon.ico" type="image/x-icon">-->
    <link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">   
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css">
    <link href="node_modules/nvd3/nv.d3.min.css" rel="stylesheet" type="text/css">
    <style>
      
        svg {
            display: block;
            float: left;
            /*height: 33%;*/
            height: 500px;
            min-width: 100%;
        } 

    </style>    
</head>
<body>

	<div id="wrapper">
        <!-- Navigation -->
        <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="../dashboard/index.html">  Ballot Bots</a>
            </div>
            <!-- /.navbar-header -->
        </nav>
        
        <!--<a href="plot.html">plot</a>-->

 	<div id="wrapper">
        <div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header"><strong>Demo Data 1</strong></h1>
                </div>
            </div>
                     <svg id="chart1" class="with-3d-shadow with-transitions"></svg>
            </div>
        </div> 

        <div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header"><strong>Demo Data 2</strong></h1>
                </div>
            </div>
                     <svg id="chart2" class="with-3d-shadow with-transitions"></svg>
            </div>
        </div>

        <div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header"><strong>Demo Data 3</strong></h1>
                </div>
            </div>
                     <svg id="chart3" class="with-3d-shadow with-transitions"></svg>
            </div>
        </div>

  </div>      


<script src="node_modules/d3/d3.min.js"></script>
<script src="node_modules/nvd3/nv.d3.js"></script>
<script src="node_modules/nvd3/src/interactiveLayer.js"></script>
<script src="node_modules/nvd3/src/utils.js"></script>
<script src="node_modules/nvd3/src/tooltip.js"></script>
<script src="node_modules/nvd3/src/models/multiBarHorizontal.js"></script>
<script src="node_modules/nvd3/src/models/multiBarHorizontalChart.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script> 
<script>
 
 

d3.csv("/data/COUNTER.csv", function(error, data){
        
        console.log(exampleData)
        // create an empty object that nv is expecting
        var exampleData = [
        {
            key: "ballot detected",
            values: []
        }
    ];

        // populate the empty object with your data
    data.forEach(function (d){
        //d.value = +d.value
        exampleData[0].values.push(d)    
    })       

    data.forEach(function (d){ 
        d.label = +d.label * 1000
    })

    nv.addGraph(function() {
        var chart = nv.models.discreteBarChart()
            .x(function (d) { console.log(d); return d.label })
            .y(function (d) { return d.value })
            .staggerLabels(true)
            .tooltips(true)
            .showValues(true)

    chart.xAxis
        .margin({bottom: 50})
        .tickValues([1428417291000,1428417303000,1428417331000])
        .tickFormat(function(d) {
            return d3.time.format('%X')(new Date(d))
          });

    //chart.yAxis
      //  .tickFormat(d3.format('g'));

        d3.select('#chart1')
                .datum(exampleData)
                .attr("id", function (d) { console.log(d); })
            .transition().duration(500)
                .call(chart);
 
        nv.utils.windowResize(chart.update);
        return chart;
    });
});

d3.csv("/COUNTER.csv", function(error, data){

var exampleData = [
        {
            key: "ballot detected",
            values: []
        }
    ];

        // populate the empty object with your data
    data.forEach(function (d){
        //d.value = +d.value
        exampleData[0].values.push(d)
    })  


    data.forEach(function (d){ 
        d.label = +d.label * 1000
    })


  nv.addGraph(function() {
    var chart = nv.models.lineChart()
                  .x(function(d) { return d.label })
                  .y(function(d) { return d.value }) //adjusting, 100% is 1.00, not 100 as it is in the data
                  //.color(d3.scale.category10().range())
                  
                  //.duration(1200)
                  //.width(width)
                  //.useInteractiveGuideline(true);
             

     chart.xAxis
        .margin({bottom: 50})
        .tickValues([1428417291000,1428417303000,1428417331000])
        .tickFormat(function(d) {
            return d3.time.format('%X')(new Date(d))
          });

    chart.yAxis
        .tickFormat(d3.format('X'));

    d3.select('#chart2')
        .datum(exampleData)
        .transition().duration(1200)
        .call(chart);

    nv.utils.windowResize(chart.update);

    return chart;
  });
 });


</script>

</body>
</html>